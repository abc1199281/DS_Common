// BinaryTree.h

#ifndef __DS_COMMON_BINARY_TREE_H__
#define __DS_COMMON_BINARY_TREE_H__

/* Information */
//====================================================================================================

/*!
*  @file   BinaryTree.h
*
*  @brief  The Definition of BinaryTree and its Node Template
*
*  @author Po-Wei Huang
*
*  @date   2021/04/24
*/

//====================================================================================================


/* Header */
//====================================================================================================

#include <iostream>
#include <condition_variable>

#include <DS_Common/LibSetting/LibSetting.h>
//====================================================================================================


/* Definition */
//====================================================================================================

namespace DS_Common {

	//--------------------------------------------------------------------------------------------
	/*!
	*  @brief      Tree Node
	*
	*/
	template <class T>
	struct TreeNode
	{
		T val;
		TreeNode *left;
		TreeNode *right;
		TreeNode() : left(nullptr), right(nullptr) {}
		TreeNode(T x) : val(x), left(nullptr), right(nullptr) {}
		TreeNode(T x, TreeNode<T> *left, TreeNode<T> *right) : val(x), left(left), right(right) {}
	};
	//--------------------------------------------------------------------------------------------

	//--------------------------------------------------------------------------------------------
	/*!
	*  @brief      Binary Tree
	*
	*/
	template<typename T>
	class  BinaryTree
	{
	private:
		TreeNode<T>* root;
		using visit_callback = std::function< void(TreeNode<T>* cur) >;
		visit_callback visit_call_back_func;
	public:
		
		//-----------------------------------------------------------------------------------------
		/*!
		*  @brief      Default Constructor
		*
		*/
		BinaryTree() {}
		//-----------------------------------------------------------------------------------------

		//-----------------------------------------------------------------------------------------
		/*!
		*  @brief      Constructor with Root
		*
		*/
		BinaryTree(TreeNode<T>* r) : root(r) {}
		//-----------------------------------------------------------------------------------------

		//-----------------------------------------------------------------------------------------
		/*!
		*  @brief      In order Traversal
		*
		*/
		void inorder(TreeNode<T>* cur);
		//-----------------------------------------------------------------------------------------

		//-----------------------------------------------------------------------------------------
		/*!
		*  @brief      In order Traversal
		*
		*/
		void inorder() { inorder(root); };
		//-----------------------------------------------------------------------------------------

		////-----------------------------------------------------------------------------------------
		///*!
		//*  @brief      visit function while traversal
		//*
		//*/
		//void visit(TreeNode<T>* cur) { Callback(cur); };
		////-----------------------------------------------------------------------------------------

		//-----------------------------------------------------------------------------------------
		/*!
		*  @brief      set call back function
		*
		*/
		void set_callback(visit_callback  fun) {
			visit_call_back_func = fun;
		}
		//-----------------------------------------------------------------------------------------
	};
	//--------------------------------------------------------------------------------------------
}



//====================================================================================================


/* Function */
//====================================================================================================

namespace DS_Common {
	//-----------------------------------------------------------------------------------------
	template<typename T>
	void BinaryTree<T>::inorder(TreeNode<T>* cur)
	{
		if (!cur) return;
		inorder(cur->left);
		//std::cout << cur->val << std::endl;		

		visit_call_back_func(cur);
		inorder(cur->right);
	}
	//-----------------------------------------------------------------------------------------
}
//====================================================================================================

#endif /* __DS_COMMON_BINARY_TREE_H__ */
